{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{80:function(e,t,s){},81:function(e,t,s){},91:function(e,t,s){\"use strict\";s.r(t);var n=s(0),a=s.n(n),r=s(29),o=s.n(r),i=(s(80),s(12)),c=s(33),d=s(19),u=s(20),l=s(32),h=s(24),p=s(23),j=(s(81),s(122)),g=s(2),O=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:\"postMessage\",value:function(e){var t=sessionStorage.getItem(\"messageToken\");if(null!==t&&13===e.keyCode&&(e.preventDefault(),\"\"!==e.target.value)){var s=new FormData;s.append(\"message\",e.target.value);var n=new XMLHttpRequest;n.open(\"POST\",Object({NODE_ENV:\"production\",PUBLIC_URL:\"/githubPagesHostedReact\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL+\"/message\"),n.setRequestHeader(\"Authorization\",\"Bearer \"+t),n.onreadystatechange=function(e){4===e.target.readyState&&403!==e.target.status&&null!==t&&(t=e.target.getResponseHeader(\"token\"),sessionStorage.setItem(\"messageToken\",t))},n.send(s),e.target.value=\"\"}}},{key:\"render\",value:function(){var e=this;return Object(g.jsx)(j.a,{onKeyUp:function(t){return e.postMessage(t)},placeholder:this.props.needToLogin?\"You need to log in before writting messages.\":\"Type a message here\"})}}]),s}(n.Component),b=O,v=s(120),m=s(127),f=s(128),S=s(129),L=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:\"render\",value:function(){var e=this;return Object(g.jsx)(v.a,{open:this.props.needToLogin,children:Object(g.jsx)(m.a,{p:5,children:Object(g.jsxs)(f.a,{children:[Object(g.jsxs)(m.a,{pb:2,children:[Object(g.jsx)(S.a,{children:\"Username: \"}),Object(g.jsx)(j.a,{onKeyUp:function(t){\"Enter\"===t.key&&e.props.login()},onChange:function(t){return e.props.setUsername(t.target.value)},value:this.props.username})]}),Object(g.jsxs)(m.a,{id:\"loginForm\",children:[Object(g.jsx)(S.a,{id:\"loginForm\",children:\"Password: \"}),Object(g.jsx)(j.a,{id:\"loginForm\",type:\"password\",onKeyUp:function(t){\"Enter\"===t.key&&e.props.login()},onChange:function(t){return e.props.setPassword(t.target.value)},value:this.props.password})]})]})})})}}]),s}(n.Component),T=L,y=s(121),x=s(123),E=s(126),w=s(130),P=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(d.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:\"smooth\"})},e}return Object(u.a)(s,[{key:\"componentDidUpdate\",value:function(){this.scrollToBottom()}},{key:\"render\",value:function(){var e=this,t=this.props.events?this.props.events.map((function(e){var t,s=new Date(1e3*e.created).toLocaleDateString(\"en-US\")+\" \"+new Date(1e3*e.created).toLocaleTimeString(\"en-US\");switch(e.type){case\"Message\":t=e.user?\"\".concat(e.user,\" says: \").concat(e.message,\" at \").concat(s):\"\".concat(e.message,\" at \").concat(s);break;case\"Join\":t=\"JOIN \".concat(e.user,\" at \").concat(s);break;case\"Part\":t=\"PART \".concat(e.user,\" at \").concat(s);break;case\"Status\":t=\"STATUS \".concat(e.message,\" at \").concat(s);break;default:return\"\"}return Object(g.jsx)(y.a,{disablePadding:!0,children:Object(g.jsx)(x.a,{primary:t})},e.created.toString())})):\"no messages\";return Object(g.jsx)(E.a,{style:{paddingLeft:\"8px\",height:\"85vh\",overflow:\"auto\"},children:Object(g.jsxs)(w.a,{style:{overflow:\"auto\"},children:[t,Object(g.jsx)(\"div\",{style:{float:\"left\",clear:\"both\"},ref:function(t){e.messagesEnd=t}})]})})}}]),s}(n.Component),_=P,k=s(131),C=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:\"displayUserList\",value:function(){return this.props.userList&&this.props.userList.length>0?this.props.userList.map((function(e){return Object(g.jsx)(y.a,{disablePadding:!0,children:Object(g.jsx)(x.a,{primary:e})},e)})):\"no users\"}},{key:\"render\",value:function(){return Object(g.jsx)(w.a,{style:{paddingLeft:\"8px\"},subheader:Object(g.jsx)(k.a,{component:\"div\",id:\"nested-list-subheader\",children:\"User List\"}),children:this.displayUserList()})}}]),s}(n.Component),U=C,R=s(132),D=s(125),A=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={userList:[],events:[],username:\"\",password:\"\",needToLogin:!0,streamToken:\"\",header:\"Chat\",composePlaceholder:\"Enter a message to send\"},n.serve=n.serve.bind(Object(l.a)(n)),n.login=n.login.bind(Object(l.a)(n)),n.setUsername=n.setUsername.bind(Object(l.a)(n)),n.setPassword=n.setPassword.bind(Object(l.a)(n)),n}return Object(u.a)(s,[{key:\"login\",value:function(){var e=new XMLHttpRequest,t=new FormData;t.append(\"password\",this.state.password),t.append(\"username\",this.state.username),e.open(\"POST\",Object({NODE_ENV:\"production\",PUBLIC_URL:\"/githubPagesHostedReact\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL+\"/login\");var s=this;e.onreadystatechange=function(){if(4===this.readyState)if(201===this.status){var e=JSON.parse(this.responseText);sessionStorage.setItem(\"messageToken\",e.message_token),s.setState({password:\"\",username:\"Loading...\",streamToken:e.stream_token,needToLogin:!1}),s.serve()}else 403===this.status?alert(\"Invalid username or password\"):409===this.status?alert(s.state.username+\" is already logged in\"):alert(this.status+\" failure to /login\")},e.send(t)}},{key:\"serve\",value:function(){var e=this,t=new EventSource(\"\".concat(Object({NODE_ENV:\"production\",PUBLIC_URL:\"/githubPagesHostedReact\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL,\"/stream/\").concat(this.state.streamToken));t.addEventListener(\"Part\",(function(t){t=Object(c.a)(Object(c.a)({},JSON.parse(t.data)),{},{type:\"Part\"});var s=e.state.userList;s.splice(e.state.userList.indexOf(t.user),1),e.setState((function(e){return{userList:s,events:[].concat(Object(i.a)(e.events),[t]),needToLogin:!1}}))}),!1),t.addEventListener(\"open\",(function(t){e.setState((function(e){return{username:\"\",needToLogin:!1}}))}),!1),t.addEventListener(\"Message\",(function(t){var s=Object(c.a)(Object(c.a)({},JSON.parse(t.data)),{},{type:\"Message\"});e.setState((function(e){return{events:[].concat(Object(i.a)(e.events),[s]),needToLogin:!1}}))}),!1),t.addEventListener(\"Join\",(function(t){var s=JSON.parse(t.data),n=Object(c.a)(Object(c.a)({},s),{},{type:\"Join\"});e.setState((function(e){return{header:\"Chat\",needToLogin:!1,events:[].concat(Object(i.a)(e.events),[n])}})),e.state.userList.includes(s.user)?e.setState((function(e){return{header:\"Chat\"}})):e.setState((function(e){return{userList:[].concat(Object(i.a)(e.userList),[s.user])}}))}),!1),t.addEventListener(\"Disconnect\",(function(){t.close(),e.disconnect(),e.setState({events:[]})}),!1),t.addEventListener(\"ServerStatus\",(function(t){var s=JSON.parse(t.data),n={message:s.status,created:s.created,type:\"Status\"};e.setState((function(t){return{events:[].concat(Object(i.a)(e.state.events),[n])}}))}),!1),t.addEventListener(\"Users\",(function(t){e.setState((function(e){return{userList:JSON.parse(t.data).users}}))}),!1),t.addEventListener(\"error\",(function(t){2===t.target.readyState?e.disconnect():(e.setState((function(e){return{header:\"Disconnected, retrying\"}})),console.log(\"Disconnected, retrying\"))}),!1),t.onerror=function(e){console.log(\"Connection lost, reestablishing\")}}},{key:\"setUsername\",value:function(e){this.setState({username:e})}},{key:\"setPassword\",value:function(e){this.setState({password:e})}},{key:\"disconnect\",value:function(){this.setState((function(e){return{needToLogin:!0,messageToken:\"\",streamToken:\"\",userList:[]}}))}},{key:\"render\",value:function(){return this.state.needToLogin?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(\"header\",{children:Object(g.jsx)(R.a,{style:{textAlign:\"center\"},children:\"Log In to View Chat\"})}),Object(g.jsx)(\"p\",{children:\"Not logged in\"}),Object(g.jsx)(T,{setUsername:this.setUsername,setPassword:this.setPassword,needToLogin:this.state.needToLogin,serve:this.serve,login:this.login,username:this.state.username,password:this.state.password})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(\"header\",{children:Object(g.jsx)(R.a,{style:{textAlign:\"center\"},children:this.state.header})}),Object(g.jsx)(T,{setUsername:this.setUsername,setPassword:this.setPassword,needToLogin:this.state.needToLogin,serve:this.serve,login:this.login,username:this.state.username,password:this.state.password}),Object(g.jsxs)(D.a,{mt:2,container:!0,spacing:2,children:[Object(g.jsx)(D.a,{item:!0,xs:8,md:8,children:Object(g.jsxs)(E.a,{style:{display:\"flex\",flexWrap:\"wrap\",flexDirection:\"column\"},children:[Object(g.jsx)(_,{events:this.state.events}),Object(g.jsx)(b,{needToLogin:this.state.needToLogin})]})}),Object(g.jsx)(D.a,{item:!0,xs:4,md:4,children:Object(g.jsx)(E.a,{children:Object(g.jsx)(U,{userList:this.state.userList})})})]})]})}}]),s}(n.Component),F=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,133)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;s(e),n(e),a(e),r(e),o(e)}))};s(87),s(88),s(89),s(90);o.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(A,{})}),document.getElementById(\"root\")),F()}},[[91,1,2]]]);","name":"static/js/main.f79a7a74.chunk.js","map":{"version":3,"sources":["static/js/main.f79a7a74.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","toConsumableArray","objectSpread2","classCallCheck","createClass","assertThisInitialized","inherits","createSuper","Input","jsx_runtime","Compose_Compose","_Component","Object","Compose","_super","apply","arguments","key","value","e","messageToken","sessionStorage","getItem","keyCode","preventDefault","target","form","FormData","append","request","XMLHttpRequest","open","NODE_ENV","PUBLIC_URL","WDS_SOCKET_HOST","undefined","WDS_SOCKET_PATH","WDS_SOCKET_PORT","FAST_REFRESH","REACT_APP_BASE_URL","setRequestHeader","onreadystatechange","event","readyState","status","getResponseHeader","setItem","send","_this","onKeyUp","postMessage","placeholder","props","needToLogin","components_Compose","Dialog","Box","FormGroup","FormLabel","LoginForm_LoginDialog","LoginDialog","children","p","pb","login","onChange","setUsername","username","id","type","setPassword","password","LoginForm","ListItem","ListItemText","Paper","List","MessageList_MessageList","MessageList","_len","length","args","Array","_key","call","concat","scrollToBottom","messagesEnd","scrollIntoView","behavior","_this2","messages","events","map","message","text","dateAndTime","Date","created","toLocaleDateString","toLocaleTimeString","user","disablePadding","primary","toString","style","paddingLeft","height","overflow","float","clear","ref","el","components_MessageList","ListSubheader","UserList_UserList","UserList","userList","subheader","component","displayUserList","components_UserList","AppBar","Grid","src_App_0","App","state","streamToken","header","composePlaceholder","serve","bind","that","data","JSON","parse","responseText","message_token","setState","stream_token","alert","server","EventSource","addEventListener","temp","splice","indexOf","prevState","santizedData","includes","close","disconnect","parsedEvent","users","console","log","onerror","_event","textAlign","mt","container","spacing","item","xs","md","display","flexWrap","flexDirection","src_reportWebVitals","onPerfEntry","Function","then","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","a","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 80:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 91:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(29);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(80);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 2 modules\nvar toConsumableArray = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(33);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(19);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\nvar assertThisInitialized = __webpack_require__(32);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 4 modules\nvar createSuper = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./src/App.css\nvar src_App = __webpack_require__(81);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Input/Input.js + 9 modules\nvar Input = __webpack_require__(122);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/components/Compose.jsx\nvar Compose_Compose=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(Compose,_Component);var _super=Object(createSuper[\"a\" /* default */])(Compose);function Compose(){Object(classCallCheck[\"a\" /* default */])(this,Compose);return _super.apply(this,arguments);}Object(createClass[\"a\" /* default */])(Compose,[{key:\"postMessage\",value:function postMessage(e){var messageToken=sessionStorage.getItem('messageToken');if(messageToken===null||e.keyCode!==13)return;e.preventDefault();if(e.target.value===\"\")return;var form=new FormData();form.append(\"message\",e.target.value);var request=new XMLHttpRequest();// request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\nrequest.open(\"POST\",Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"/githubPagesHostedReact\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_BASE_URL+\"/message\");request.setRequestHeader(\"Authorization\",\"Bearer \"+messageToken);request.onreadystatechange=function(event){if(event.target.readyState===4&&event.target.status!==403&&messageToken!==null){messageToken=event.target.getResponseHeader(\"token\");sessionStorage.setItem('messageToken',messageToken);}};request.send(form);e.target.value=\"\";}},{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{onKeyUp:function onKeyUp(e){return _this.postMessage(e);},placeholder:this.props.needToLogin?'You need to log in before writting messages.':'Type a message here'});}}]);return Compose;}(react[\"Component\"]);/* harmony default export */ var components_Compose = (Compose_Compose);\n// EXTERNAL MODULE: ./node_modules/@mui/material/Dialog/Dialog.js + 18 modules\nvar Dialog = __webpack_require__(120);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Box/Box.js + 1 modules\nvar Box = __webpack_require__(127);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/FormGroup/FormGroup.js + 1 modules\nvar FormGroup = __webpack_require__(128);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/FormLabel/FormLabel.js + 1 modules\nvar FormLabel = __webpack_require__(129);\n\n// CONCATENATED MODULE: ./src/components/LoginForm.jsx\nvar LoginForm_LoginDialog=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(LoginDialog,_Component);var _super=Object(createSuper[\"a\" /* default */])(LoginDialog);function LoginDialog(){Object(classCallCheck[\"a\" /* default */])(this,LoginDialog);return _super.apply(this,arguments);}Object(createClass[\"a\" /* default */])(LoginDialog,[{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Dialog[\"a\" /* default */],{open:this.props.needToLogin,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Box[\"a\" /* default */],{p:5,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FormGroup[\"a\" /* default */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Box[\"a\" /* default */],{pb:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormLabel[\"a\" /* default */],{children:\"Username: \"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{onKeyUp:function onKeyUp(e){if(e.key==='Enter')_this.props.login();},onChange:function onChange(e){return _this.props.setUsername(e.target.value);},value:this.props.username})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Box[\"a\" /* default */],{id:\"loginForm\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormLabel[\"a\" /* default */],{id:\"loginForm\",children:\"Password: \"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{id:\"loginForm\",type:\"password\",onKeyUp:function onKeyUp(e){if(e.key==='Enter')_this.props.login();},onChange:function onChange(e){return _this.props.setPassword(e.target.value);},value:this.props.password})]})]})})});}}]);return LoginDialog;}(react[\"Component\"]);/* harmony default export */ var LoginForm = (LoginForm_LoginDialog);\n// EXTERNAL MODULE: ./node_modules/@mui/material/ListItem/ListItem.js + 18 modules\nvar ListItem = __webpack_require__(121);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/ListItemText/ListItemText.js + 3 modules\nvar ListItemText = __webpack_require__(123);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Paper/Paper.js + 1 modules\nvar Paper = __webpack_require__(126);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/List/List.js + 1 modules\nvar List = __webpack_require__(130);\n\n// CONCATENATED MODULE: ./src/components/MessageList.jsx\nvar MessageList_MessageList=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(MessageList,_Component);var _super=Object(createSuper[\"a\" /* default */])(MessageList);function MessageList(){var _this;Object(classCallCheck[\"a\" /* default */])(this,MessageList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.scrollToBottom=function(){_this.messagesEnd.scrollIntoView({behavior:\"smooth\"});};return _this;}Object(createClass[\"a\" /* default */])(MessageList,[{key:\"componentDidUpdate\",value:// https://stackoverflow.com/questions/37620694/how-to-scroll-to-bottom-in-react\nfunction componentDidUpdate(){this.scrollToBottom();}},{key:\"render\",value:function render(){var _this2=this;var messages=this.props.events?this.props.events.map(function(message){var text;var dateAndTime=new Date(message.created*1000).toLocaleDateString(\"en-US\")+' '+new Date(message.created*1000).toLocaleTimeString(\"en-US\");switch(message.type){case'Message':text=message.user?\"\".concat(message.user,\" says: \").concat(message.message,\" at \").concat(dateAndTime):\"\".concat(message.message,\" at \").concat(dateAndTime);break;case'Join':text=\"JOIN \".concat(message.user,\" at \").concat(dateAndTime);break;case'Part':text=\"PART \".concat(message.user,\" at \").concat(dateAndTime);break;case'Status':text=\"STATUS \".concat(message.message,\" at \").concat(dateAndTime);break;default:return\"\";}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItem[\"a\" /* default */],{disablePadding:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItemText[\"a\" /* default */],{primary:text})},message.created.toString());}):'no messages';return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Paper[\"a\" /* default */],{style:{paddingLeft:'8px',height:'85vh',overflow:'auto'},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{style:{overflow:'auto'},children:[messages,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{float:\"left\",clear:\"both\"},ref:function ref(el){_this2.messagesEnd=el;}})]})});}}]);return MessageList;}(react[\"Component\"]);/* harmony default export */ var components_MessageList = (MessageList_MessageList);\n// EXTERNAL MODULE: ./node_modules/@mui/material/ListSubheader/ListSubheader.js + 1 modules\nvar ListSubheader = __webpack_require__(131);\n\n// CONCATENATED MODULE: ./src/components/UserList.jsx\nvar UserList_UserList=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(UserList,_Component);var _super=Object(createSuper[\"a\" /* default */])(UserList);function UserList(){Object(classCallCheck[\"a\" /* default */])(this,UserList);return _super.apply(this,arguments);}Object(createClass[\"a\" /* default */])(UserList,[{key:\"displayUserList\",value:function displayUserList(){if(!this.props.userList){return\"no users\";}return this.props.userList.length>0?this.props.userList.map(function(user){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItem[\"a\" /* default */],{disablePadding:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItemText[\"a\" /* default */],{primary:user})},user);}):\"no users\";}},{key:\"render\",value:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(List[\"a\" /* default */],{style:{paddingLeft:'8px'},subheader:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListSubheader[\"a\" /* default */],{component:\"div\",id:\"nested-list-subheader\",children:\"User List\"}),children:this.displayUserList()});}}]);return UserList;}(react[\"Component\"]);/* harmony default export */ var components_UserList = (UserList_UserList);\n// EXTERNAL MODULE: ./node_modules/@mui/material/AppBar/AppBar.js + 1 modules\nvar AppBar = __webpack_require__(132);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Grid/Grid.js + 2 modules\nvar Grid = __webpack_require__(125);\n\n// CONCATENATED MODULE: ./src/App.jsx\nvar App_App=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(App,_Component);var _super=Object(createSuper[\"a\" /* default */])(App);function App(props){var _this;Object(classCallCheck[\"a\" /* default */])(this,App);_this=_super.call(this,props);_this.state={userList:[],events:[],username:\"\",password:\"\",needToLogin:true,streamToken:\"\",header:'Chat',composePlaceholder:'Enter a message to send'};_this.serve=_this.serve.bind(Object(assertThisInitialized[\"a\" /* default */])(_this));_this.login=_this.login.bind(Object(assertThisInitialized[\"a\" /* default */])(_this));_this.setUsername=_this.setUsername.bind(Object(assertThisInitialized[\"a\" /* default */])(_this));_this.setPassword=_this.setPassword.bind(Object(assertThisInitialized[\"a\" /* default */])(_this));return _this;}Object(createClass[\"a\" /* default */])(App,[{key:\"login\",value:function login(){var request=new XMLHttpRequest();var form=new FormData();form.append(\"password\",this.state.password);form.append(\"username\",this.state.username);request.open(\"POST\",Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"/githubPagesHostedReact\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_BASE_URL+\"/login\");var that=this;request.onreadystatechange=function(){if(this.readyState!==4)return;if(this.status===201){var data=JSON.parse(this.responseText);sessionStorage.setItem('messageToken',data.message_token);that.setState({password:\"\",username:\"Loading...\",streamToken:data.stream_token,needToLogin:false});that.serve();}else if(this.status===403){alert(\"Invalid username or password\");}else if(this.status===409){alert(that.state.username+\" is already logged in\");}else{alert(this.status+\" failure to /login\");}};request.send(form);}},{key:\"serve\",value:function serve(){var _this2=this;var server=new EventSource(\"\".concat(Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"/githubPagesHostedReact\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_BASE_URL,\"/stream/\").concat(this.state.streamToken));server.addEventListener(\"Part\",function(event){event=Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},JSON.parse(event.data)),{},{type:'Part'});var temp=_this2.state.userList;temp.splice(_this2.state.userList.indexOf(event.user),1);_this2.setState(function(prevState){return{userList:temp,events:[].concat(Object(toConsumableArray[\"a\" /* default */])(prevState.events),[event]),needToLogin:false};});},false);server.addEventListener(\"open\",function(event){_this2.setState(function(prevState){return{username:\"\",needToLogin:false};});},false);server.addEventListener(\"Message\",function(event){var data=Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},JSON.parse(event.data)),{},{type:'Message'});_this2.setState(function(prevState){return{events:[].concat(Object(toConsumableArray[\"a\" /* default */])(prevState.events),[data]),needToLogin:false};});},false);server.addEventListener(\"Join\",function(event){var data=JSON.parse(event.data);var santizedData=Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},data),{},{type:'Join'});_this2.setState(function(prevState){return{header:'Chat',needToLogin:false,events:[].concat(Object(toConsumableArray[\"a\" /* default */])(prevState.events),[santizedData])};});if(_this2.state.userList.includes(data.user)){_this2.setState(function(prevState){return{header:'Chat'};});return;}_this2.setState(function(prevState){return{userList:[].concat(Object(toConsumableArray[\"a\" /* default */])(prevState.userList),[data.user])};});},false);server.addEventListener(\"Disconnect\",function(){server.close();_this2.disconnect();_this2.setState({events:[]});},false);server.addEventListener(\"ServerStatus\",function(event){var parsedEvent=JSON.parse(event.data);var santizedData={message:parsedEvent.status,created:parsedEvent.created,type:'Status'};_this2.setState(function(prevState){return{events:[].concat(Object(toConsumableArray[\"a\" /* default */])(_this2.state.events),[santizedData])};});},false);server.addEventListener(\"Users\",function(event){_this2.setState(function(prevState){return{userList:JSON.parse(event.data).users};});},false);server.addEventListener(\"error\",function(event){if(event.target.readyState===2){_this2.disconnect();}else{_this2.setState(function(prevState){return{header:\"Disconnected, retrying\"};});console.log(\"Disconnected, retrying\");}},false);server.onerror=function(_event){console.log(\"Connection lost, reestablishing\");};}},{key:\"setUsername\",value:function setUsername(value){this.setState({username:value});}},{key:\"setPassword\",value:function setPassword(value){this.setState({password:value});}},{key:\"disconnect\",value:function disconnect(){this.setState(function(prevState){return{needToLogin:true,messageToken:\"\",streamToken:\"\",userList:[]};});}},{key:\"render\",value:function render(){// debugger\nreturn this.state.needToLogin?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"header\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AppBar[\"a\" /* default */],{style:{textAlign:'center'},children:'Log In to View Chat'})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Not logged in\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LoginForm,{setUsername:this.setUsername,setPassword:this.setPassword,needToLogin:this.state.needToLogin,serve:this.serve,login:this.login,username:this.state.username,password:this.state.password})]}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"header\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AppBar[\"a\" /* default */],{style:{textAlign:'center'},children:this.state.header})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LoginForm,{setUsername:this.setUsername,setPassword:this.setPassword,needToLogin:this.state.needToLogin,serve:this.serve,login:this.login,username:this.state.username,password:this.state.password}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{mt:2,container:true,spacing:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,xs:8,md:8,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Paper[\"a\" /* default */],{style:{display:'flex',flexWrap:'wrap',flexDirection:'column'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_MessageList,{events:this.state.events}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Compose,{needToLogin:this.state.needToLogin})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,xs:4,md:4,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Paper[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_UserList,{userList:this.state.userList})})})]})]});}}]);return App;}(react[\"Component\"]);/* harmony default export */ var src_App_0 = (App_App);\n// CONCATENATED MODULE: ./src/reportWebVitals.js\nvar reportWebVitals=function reportWebVitals(onPerfEntry){if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 3).then(__webpack_require__.bind(null, 133)).then(function(_ref){var getCLS=_ref.getCLS,getFID=_ref.getFID,getFCP=_ref.getFCP,getLCP=_ref.getLCP,getTTFB=_ref.getTTFB;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ var src_reportWebVitals = (reportWebVitals);\n// EXTERNAL MODULE: ./node_modules/@fontsource/roboto/300.css\nvar _300 = __webpack_require__(87);\n\n// EXTERNAL MODULE: ./node_modules/@fontsource/roboto/400.css\nvar _400 = __webpack_require__(88);\n\n// EXTERNAL MODULE: ./node_modules/@fontsource/roboto/500.css\nvar _500 = __webpack_require__(89);\n\n// EXTERNAL MODULE: ./node_modules/@fontsource/roboto/700.css\nvar _700 = __webpack_require__(90);\n\n// CONCATENATED MODULE: ./src/index.js\n// Import Roboto (which is a font)\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App_0,{})}),document.getElementById(\"root\"));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nsrc_reportWebVitals();\n\n/***/ })\n\n},[[91,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/postcss-loader/src/index.js??postcss!/Users/Server/student/cs291a/githubPagesHostedReact/src/index.css","/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/postcss-loader/src/index.js??postcss!/Users/Server/student/cs291a/githubPagesHostedReact/src/App.css","/Users/Server/student/cs291a/githubPagesHostedReact/src/components/Compose.jsx","/Users/Server/student/cs291a/githubPagesHostedReact/src/components/LoginForm.jsx","/Users/Server/student/cs291a/githubPagesHostedReact/src/components/MessageList.jsx","/Users/Server/student/cs291a/githubPagesHostedReact/src/components/UserList.jsx","/Users/Server/student/cs291a/githubPagesHostedReact/src/App.jsx","/Users/Server/student/cs291a/githubPagesHostedReact/src/reportWebVitals.js","/Users/Server/student/cs291a/githubPagesHostedReact/src/index.js"],"names":["Compose","e","messageToken","sessionStorage","getItem","keyCode","preventDefault","target","value","form","FormData","append","request","XMLHttpRequest","open","process","REACT_APP_BASE_URL","setRequestHeader","onreadystatechange","event","readyState","status","getResponseHeader","setItem","send","postMessage","props","needToLogin","Component","LoginDialog","key","login","setUsername","username","setPassword","password","MessageList","scrollToBottom","messagesEnd","scrollIntoView","behavior","messages","events","map","message","text","dateAndTime","Date","created","toLocaleDateString","toLocaleTimeString","type","user","toString","paddingLeft","height","overflow","float","clear","el","UserList","userList","length","displayUserList","App","state","streamToken","header","composePlaceholder","serve","bind","that","data","JSON","parse","responseText","message_token","setState","stream_token","alert","server","EventSource","addEventListener","temp","splice","indexOf","prevState","santizedData","includes","close","disconnect","parsedEvent","users","console","log","onerror","_event","textAlign","display","flexWrap","flexDirection","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import { Input } from '@mui/material'\nimport React, { Component } from 'react'\n\nexport class Compose extends Component {\n\n    postMessage(e){\n        var messageToken=sessionStorage.getItem('messageToken')\n\n        if (messageToken === null || e.keyCode !== 13)\n            return;\n        e.preventDefault();\n        if (e.target.value === \"\") return;\n    \n        var form = new FormData();\n        form.append(\"message\", e.target.value);\n    \n        var request = new XMLHttpRequest();\n        // request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n        request.open(\"POST\", process.env.REACT_APP_BASE_URL + \"/message\");\n        request.setRequestHeader(\n            \"Authorization\",\n            \"Bearer \" + messageToken\n        );\n        request.onreadystatechange = function(event) {\n            if (event.target.readyState === 4 && event.target.status !== 403 && messageToken !== null) {\n                messageToken = event.target.getResponseHeader(\"token\");\n                sessionStorage.setItem('messageToken', messageToken)\n            }\n        }\n        request.send(form);\n    \n        e.target.value = \"\";\n    }\n\n    render() {\n        return (\n            <Input onKeyUp={(e) => this.postMessage(e)} placeholder={this.props.needToLogin? 'You need to log in before writting messages.' : 'Type a message here'} />\n        )\n    }\n}\n\nexport default Compose\n","import React, { Component } from 'react';\nimport { Box, Dialog, FormGroup, FormLabel, Input } from '@mui/material';\n\nclass LoginDialog extends Component {\n    \n    render(){\n\n      return(\n          <Dialog open={this.props.needToLogin}>\n          <Box p={5}>\n            <FormGroup>\n              <Box pb={2}>\n                <FormLabel>\n                  {\"Username: \"}\n                </FormLabel>\n                <Input onKeyUp={(e) => {if(e.key === 'Enter') this.props.login()}} onChange={(e) => this.props.setUsername(e.target.value)} value={this.props.username}/>\n              </Box>\n              <Box id=\"loginForm\">\n                <FormLabel id=\"loginForm\">\n                    {\"Password: \"}\n                  </FormLabel>\n                <Input id=\"loginForm\" type=\"password\" onKeyUp={(e) => {if(e.key === 'Enter') this.props.login()}} onChange={(e) => this.props.setPassword(e.target.value)} value={this.props.password} />\n              </Box>\n            </FormGroup>\n          </Box>\n        </Dialog>\n      )\n    }\n}\n\nexport default LoginDialog","import React, { Component } from 'react'\nimport { Paper, List, ListItem, ListItemText } from '@mui/material'\n\n\nexport class MessageList extends Component {\n\n    // https://stackoverflow.com/questions/37620694/how-to-scroll-to-bottom-in-react\n\n    componentDidUpdate(){\n        this.scrollToBottom();\n    }\n\n    scrollToBottom = () => {\n        this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n      }\n\n    render() {\n        const messages = this.props.events? this.props.events.map( (message) => {\n            var text\n            var dateAndTime = new Date(message.created * 1000).toLocaleDateString(\"en-US\") + ' ' + new Date(message.created * 1000).toLocaleTimeString(\"en-US\")\n            switch(message.type){\n                case 'Message':\n                    text = message.user? `${message.user} says: ${message.message} at ${dateAndTime}` : `${message.message} at ${dateAndTime}`\n                    break;\n                case 'Join':\n                    text = `JOIN ${message.user} at ${dateAndTime}`\n                    break;\n                case 'Part':\n                    text = `PART ${message.user} at ${dateAndTime}`\n                    break;\n                case 'Status':\n                    text= `STATUS ${message.message} at ${dateAndTime}`\n                    break;\n                default:\n                    return \"\"\n            }\n            return( <ListItem key={message.created.toString()} disablePadding>\n                <ListItemText primary={text} />\n            </ListItem>)\n        }) : 'no messages'\n        return (\n            <Paper style={{ paddingLeft: '8px', height: '85vh', overflow: 'auto'}}>\n                <List style={{ overflow: 'auto'}}>\n                {messages}\n                <div style={{ float:\"left\", clear: \"both\" }} ref={(el) => { this.messagesEnd = el; }}></div>\n                </List>\n            </Paper>\n        )\n    }\n}\n\nexport default MessageList\n","import React, { Component } from 'react'\n\nimport {List, ListItem, ListItemText, ListSubheader} from '@mui/material'\n\nclass UserList extends Component{\n\n    displayUserList(){\n        if (!this.props.userList){\n            return \"no users\"\n        }\n        return this.props.userList.length > 0? this.props.userList.map( (user) => {\n            return(\n            <ListItem key={user} disablePadding>\n                <ListItemText primary={user} />\n            </ListItem>)\n        }) : \"no users\"\n    }\n\n    render(){\n        return(\n        <List style={{paddingLeft: '8px'}} subheader={\n            <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n              User List\n            </ListSubheader>\n          }>\n            {this.displayUserList()}\n        </List>\n        )\n    }\n}\n\nexport default UserList","import { Component } from \"react\";\nimport \"./App.css\";\nimport Compose from \"./components/Compose\";\nimport LoginForm from \"./components/LoginForm\";\nimport MessageList from \"./components/MessageList\";\nimport UserList from \"./components/UserList\"\nimport { Grid, Paper, AppBar } from '@mui/material'\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      userList: [],\n      events: [],\n      username:\"\",\n      password:\"\",\n      needToLogin: true,\n      streamToken: \"\",\n      header: 'Chat',\n      composePlaceholder: 'Enter a message to send'\n    }\n    this.serve = this.serve.bind(this)\n    this.login = this.login.bind(this)\n    this.setUsername = this.setUsername.bind(this)\n    this.setPassword = this.setPassword.bind(this)\n  }\n\n\n    login() {\n      var request = new XMLHttpRequest();\n      var form = new FormData();\n      form.append(\"password\", this.state.password);\n      form.append(\"username\", this.state.username);\n      request.open(\"POST\", process.env.REACT_APP_BASE_URL + \"/login\");\n      var that = this;\n      request.onreadystatechange = function() {\n          if (this.readyState !== 4) return;\n          if (this.status === 201) {\n              const data = JSON.parse(this.responseText);\n              sessionStorage.setItem('messageToken', data.message_token)\n              that.setState({\n                password: \"\",\n                username: \"Loading...\", \n                streamToken: data.stream_token,\n                needToLogin: false\n              })\n              that.serve();\n          } else if (this.status === 403) {\n              alert(\"Invalid username or password\");\n          } else if (this.status === 409) {\n              alert(that.state.username + \" is already logged in\");\n          } else {\n              alert(this.status + \" failure to /login\");\n          }\n      }\n      request.send(form);\n    }\n\n    serve(){\n      const server = new EventSource(`${process.env.REACT_APP_BASE_URL}/stream/${this.state.streamToken}`);\n      server.addEventListener(\"Part\", (event) =>{\n        event = {...JSON.parse(event.data), type: 'Part'}\n        var temp = this.state.userList\n        temp.splice(this.state.userList.indexOf(event.user), 1)\n        this.setState(prevState => ({userList: temp, \n          events: [...prevState.events, event], needToLogin:false})\n      )}, false)\n      server.addEventListener(\"open\", (event) =>{\n        this.setState(prevState => ({username: \"\", needToLogin: false}))\n      }, false)\n      server.addEventListener(\"Message\", (event) => {\n        var data = {...JSON.parse(event.data), type: 'Message'}\n        this.setState(prevState => ({events: [...prevState.events, data], needToLogin:false}))\n      }, false);\n      server.addEventListener(\"Join\", (event) => {\n        var data = JSON.parse(event.data);\n        var santizedData = {...data, type: 'Join'}\n        this.setState(prevState => ({header: 'Chat', needToLogin: false, events: [...prevState.events, santizedData]}))\n        if(this.state.userList.includes(data.user)) { this.setState(prevState => ({header: 'Chat'})); return}\n        this.setState(prevState => ({userList: [...prevState.userList, data.user]}))\n      }, false);\n      server.addEventListener(\n        \"Disconnect\",\n        () => {\n            server.close();\n            this.disconnect()\n            this.setState({events: []})\n        },\n        false\n    );\n      server.addEventListener(\"ServerStatus\", (event) => {\n        var parsedEvent = JSON.parse(event.data)\n        var santizedData = {message: parsedEvent.status, created: parsedEvent.created, type: 'Status'}\n        this.setState(prevState => ({events: [...this.state.events, santizedData]}))\n      }, false);\n      server.addEventListener(\"Users\", (event => {\n        this.setState(prevState => ({ userList: JSON.parse(event.data).users}))\n      }), false);\n      server.addEventListener(\n        \"error\",\n        (event) => {\n            if (event.target.readyState === 2) {\n                this.disconnect();\n            } else {\n                this.setState(prevState => ({header: \"Disconnected, retrying\"}))\n                console.log(\"Disconnected, retrying\");\n            }\n        },\n        false\n    );\n      server.onerror = (_event) => {\n        console.log(\"Connection lost, reestablishing\");\n      };\n    }\n\n    setUsername(value){\n      this.setState({username: value})\n    }\n\n    setPassword(value){\n      this.setState({password: value})\n    }\n\n    disconnect(){\n      this.setState(prevState => ({needToLogin: true, messageToken: \"\", streamToken: \"\", userList: []}))\n    }\n\n\n  render() {\n    // debugger\n\n    return this.state.needToLogin? ( \n      <>\n        <header>\n          <AppBar style={{textAlign: 'center'}}>{'Log In to View Chat'}</AppBar>\n        </header>\n        <p>Not logged in</p>\n        <LoginForm setUsername={this.setUsername} setPassword={this.setPassword} needToLogin={this.state.needToLogin} serve={this.serve} login={this.login} username={this.state.username} password={this.state.password}/>\n      </>\n      ) : (\n      <>\n        <header>\n          <AppBar style={{textAlign: 'center'}}>{this.state.header}</AppBar>\n        </header>\n        <LoginForm setUsername={this.setUsername} setPassword={this.setPassword} needToLogin={this.state.needToLogin} serve={this.serve} login={this.login} username={this.state.username} password={this.state.password}/>\n        <Grid mt={2} container spacing={2}>\n          <Grid item xs={8} md={8}>\n            <Paper style={{display: 'flex', flexWrap: 'wrap', flexDirection: 'column'}}>\n              <MessageList events={this.state.events}/>\n              <Compose needToLogin={this.state.needToLogin}/>\n            </Paper>\n          </Grid>\n          <Grid item xs={4} md={4}>\n            <Paper >\n              <UserList userList={this.state.userList} />\n            </Paper>\n          </Grid>\n        </Grid>\n      </>\n    );\n  }\n}\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\n// Import Roboto (which is a font)\n\nimport '@fontsource/roboto/300.css';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"]}}