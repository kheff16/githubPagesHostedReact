{"ast":null,"code":"import _classCallCheck from\"/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Server/student/cs291a/githubPagesHostedReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Input}from'@mui/material';import React,{Component}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export var Compose=/*#__PURE__*/function(_Component){_inherits(Compose,_Component);var _super=_createSuper(Compose);function Compose(){_classCallCheck(this,Compose);return _super.apply(this,arguments);}_createClass(Compose,[{key:\"postMessage\",value:function postMessage(e){var messageToken=sessionStorage.getItem('messageToken');if(messageToken===null||e.keyCode!==13)return;e.preventDefault();if(e.target.value===\"\")return;var form=new FormData();form.append(\"message\",e.target.value);var request=new XMLHttpRequest();// request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\nrequest.open(\"POST\",process.env.REACT_APP_BASE_URL+\"/message\");request.setRequestHeader(\"Authorization\",\"Bearer \"+messageToken);request.onreadystatechange=function(event){if(event.target.readyState===4&&event.target.status!==403&&messageToken!==null){messageToken=event.target.getResponseHeader(\"token\");sessionStorage.setItem('messageToken',messageToken);}};request.send(form);e.target.value=\"\";}},{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/_jsx(Input,{onKeyUp:function onKeyUp(e){return _this.postMessage(e);},placeholder:this.props.needToLogin?'You need to log in before writting messages.':'Type a message here'});}}]);return Compose;}(Component);export default Compose;","map":{"version":3,"sources":["/Users/Server/student/cs291a/githubPagesHostedReact/src/components/Compose.jsx"],"names":["Input","React","Component","Compose","e","messageToken","sessionStorage","getItem","keyCode","preventDefault","target","value","form","FormData","append","request","XMLHttpRequest","open","process","env","REACT_APP_BASE_URL","setRequestHeader","onreadystatechange","event","readyState","status","getResponseHeader","setItem","send","postMessage","props","needToLogin"],"mappings":"wpBAAA,OAASA,KAAT,KAAsB,eAAtB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,C,2CAEA,UAAaC,CAAAA,OAAb,uOAEI,qBAAYC,CAAZ,CAAc,CACV,GAAIC,CAAAA,YAAY,CAACC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAjB,CAEA,GAAIF,YAAY,GAAK,IAAjB,EAAyBD,CAAC,CAACI,OAAF,GAAc,EAA3C,CACI,OACJJ,CAAC,CAACK,cAAF,GACA,GAAIL,CAAC,CAACM,MAAF,CAASC,KAAT,GAAmB,EAAvB,CAA2B,OAE3B,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,QAAJ,EAAX,CACAD,IAAI,CAACE,MAAL,CAAY,SAAZ,CAAuBV,CAAC,CAACM,MAAF,CAASC,KAAhC,EAEA,GAAII,CAAAA,OAAO,CAAG,GAAIC,CAAAA,cAAJ,EAAd,CACA;AACAD,OAAO,CAACE,IAAR,CAAa,MAAb,CAAqBC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,CAAiC,UAAtD,EACAL,OAAO,CAACM,gBAAR,CACI,eADJ,CAEI,UAAYhB,YAFhB,EAIAU,OAAO,CAACO,kBAAR,CAA6B,SAASC,KAAT,CAAgB,CACzC,GAAIA,KAAK,CAACb,MAAN,CAAac,UAAb,GAA4B,CAA5B,EAAiCD,KAAK,CAACb,MAAN,CAAae,MAAb,GAAwB,GAAzD,EAAgEpB,YAAY,GAAK,IAArF,CAA2F,CACvFA,YAAY,CAAGkB,KAAK,CAACb,MAAN,CAAagB,iBAAb,CAA+B,OAA/B,CAAf,CACApB,cAAc,CAACqB,OAAf,CAAuB,cAAvB,CAAuCtB,YAAvC,EACH,CACJ,CALD,CAMAU,OAAO,CAACa,IAAR,CAAahB,IAAb,EAEAR,CAAC,CAACM,MAAF,CAASC,KAAT,CAAiB,EAAjB,CACH,CA7BL,sBA+BI,iBAAS,gBACL,mBACI,KAAC,KAAD,EAAO,OAAO,CAAE,iBAACP,CAAD,QAAO,CAAA,KAAI,CAACyB,WAAL,CAAiBzB,CAAjB,CAAP,EAAhB,CAA4C,WAAW,CAAE,KAAK0B,KAAL,CAAWC,WAAX,CAAwB,8CAAxB,CAAyE,qBAAlI,EADJ,CAGH,CAnCL,qBAA6B7B,SAA7B,EAsCA,cAAeC,CAAAA,OAAf","sourcesContent":["import { Input } from '@mui/material'\nimport React, { Component } from 'react'\n\nexport class Compose extends Component {\n\n    postMessage(e){\n        var messageToken=sessionStorage.getItem('messageToken')\n\n        if (messageToken === null || e.keyCode !== 13)\n            return;\n        e.preventDefault();\n        if (e.target.value === \"\") return;\n    \n        var form = new FormData();\n        form.append(\"message\", e.target.value);\n    \n        var request = new XMLHttpRequest();\n        // request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n        request.open(\"POST\", process.env.REACT_APP_BASE_URL + \"/message\");\n        request.setRequestHeader(\n            \"Authorization\",\n            \"Bearer \" + messageToken\n        );\n        request.onreadystatechange = function(event) {\n            if (event.target.readyState === 4 && event.target.status !== 403 && messageToken !== null) {\n                messageToken = event.target.getResponseHeader(\"token\");\n                sessionStorage.setItem('messageToken', messageToken)\n            }\n        }\n        request.send(form);\n    \n        e.target.value = \"\";\n    }\n\n    render() {\n        return (\n            <Input onKeyUp={(e) => this.postMessage(e)} placeholder={this.props.needToLogin? 'You need to log in before writting messages.' : 'Type a message here'} />\n        )\n    }\n}\n\nexport default Compose\n"]},"metadata":{},"sourceType":"module"}