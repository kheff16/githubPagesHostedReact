{"ast":null,"code":"var _jsxFileName = \"/Users/Server/student/cs291a/githubPagesHostedReact/src/components/Compose.jsx\";\nimport { Input } from '@mui/material';\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Compose extends Component {\n  postMessage(e) {\n    var messageToken = sessionStorage.getItem('messageToken');\n    if (messageToken === null || e.keyCode !== 13) return;\n    e.preventDefault();\n    if (e.target.value === \"\") return;\n    var form = new FormData();\n    form.append(\"message\", e.target.value);\n    var request = new XMLHttpRequest(); // request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n\n    request.open(\"POST\", this.props.url + \"/message\");\n    request.setRequestHeader(\"Authorization\", \"Bearer \" + messageToken);\n\n    request.onreadystatechange = function (event) {\n      if (event.target.readyState === 4 && event.target.status !== 403 && messageToken !== null) {\n        messageToken = event.target.getResponseHeader(\"token\");\n        sessionStorage.setItem('messageToken', messageToken);\n      }\n    };\n\n    request.send(form);\n    e.target.value = \"\";\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Input, {\n      onKeyUp: e => this.postMessage(e),\n      placeholder: this.props.needToLogin ? 'You need to log in before writting messages.' : 'Type a message here'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nexport default Compose;","map":{"version":3,"sources":["/Users/Server/student/cs291a/githubPagesHostedReact/src/components/Compose.jsx"],"names":["Input","React","Component","Compose","postMessage","e","messageToken","sessionStorage","getItem","keyCode","preventDefault","target","value","form","FormData","append","request","XMLHttpRequest","open","props","url","setRequestHeader","onreadystatechange","event","readyState","status","getResponseHeader","setItem","send","render","needToLogin"],"mappings":";AAAA,SAASA,KAAT,QAAsB,eAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,OAAO,MAAMC,OAAN,SAAsBD,SAAtB,CAAgC;AAEnCE,EAAAA,WAAW,CAACC,CAAD,EAAG;AACV,QAAIC,YAAY,GAACC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAjB;AAEA,QAAIF,YAAY,KAAK,IAAjB,IAAyBD,CAAC,CAACI,OAAF,KAAc,EAA3C,EACI;AACJJ,IAAAA,CAAC,CAACK,cAAF;AACA,QAAIL,CAAC,CAACM,MAAF,CAASC,KAAT,KAAmB,EAAvB,EAA2B;AAE3B,QAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,IAAAA,IAAI,CAACE,MAAL,CAAY,SAAZ,EAAuBV,CAAC,CAACM,MAAF,CAASC,KAAhC;AAEA,QAAII,OAAO,GAAG,IAAIC,cAAJ,EAAd,CAXU,CAYV;;AACAD,IAAAA,OAAO,CAACE,IAAR,CAAa,MAAb,EAAqB,KAAKC,KAAL,CAAWC,GAAX,GAAiB,UAAtC;AACAJ,IAAAA,OAAO,CAACK,gBAAR,CACI,eADJ,EAEI,YAAYf,YAFhB;;AAIAU,IAAAA,OAAO,CAACM,kBAAR,GAA6B,UAASC,KAAT,EAAgB;AACzC,UAAIA,KAAK,CAACZ,MAAN,CAAaa,UAAb,KAA4B,CAA5B,IAAiCD,KAAK,CAACZ,MAAN,CAAac,MAAb,KAAwB,GAAzD,IAAgEnB,YAAY,KAAK,IAArF,EAA2F;AACvFA,QAAAA,YAAY,GAAGiB,KAAK,CAACZ,MAAN,CAAae,iBAAb,CAA+B,OAA/B,CAAf;AACAnB,QAAAA,cAAc,CAACoB,OAAf,CAAuB,cAAvB,EAAuCrB,YAAvC;AACH;AACJ,KALD;;AAMAU,IAAAA,OAAO,CAACY,IAAR,CAAaf,IAAb;AAEAR,IAAAA,CAAC,CAACM,MAAF,CAASC,KAAT,GAAiB,EAAjB;AACH;;AAEDiB,EAAAA,MAAM,GAAG;AACL,wBACI,QAAC,KAAD;AAAO,MAAA,OAAO,EAAGxB,CAAD,IAAO,KAAKD,WAAL,CAAiBC,CAAjB,CAAvB;AAA4C,MAAA,WAAW,EAAE,KAAKc,KAAL,CAAWW,WAAX,GAAwB,8CAAxB,GAAyE;AAAlI;AAAA;AAAA;AAAA;AAAA,YADJ;AAGH;;AAnCkC;AAsCvC,eAAe3B,OAAf","sourcesContent":["import { Input } from '@mui/material'\nimport React, { Component } from 'react'\n\nexport class Compose extends Component {\n\n    postMessage(e){\n        var messageToken=sessionStorage.getItem('messageToken')\n\n        if (messageToken === null || e.keyCode !== 13)\n            return;\n        e.preventDefault();\n        if (e.target.value === \"\") return;\n    \n        var form = new FormData();\n        form.append(\"message\", e.target.value);\n    \n        var request = new XMLHttpRequest();\n        // request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n        request.open(\"POST\", this.props.url + \"/message\");\n        request.setRequestHeader(\n            \"Authorization\",\n            \"Bearer \" + messageToken\n        );\n        request.onreadystatechange = function(event) {\n            if (event.target.readyState === 4 && event.target.status !== 403 && messageToken !== null) {\n                messageToken = event.target.getResponseHeader(\"token\");\n                sessionStorage.setItem('messageToken', messageToken)\n            }\n        }\n        request.send(form);\n    \n        e.target.value = \"\";\n    }\n\n    render() {\n        return (\n            <Input onKeyUp={(e) => this.postMessage(e)} placeholder={this.props.needToLogin? 'You need to log in before writting messages.' : 'Type a message here'} />\n        )\n    }\n}\n\nexport default Compose\n"]},"metadata":{},"sourceType":"module"}