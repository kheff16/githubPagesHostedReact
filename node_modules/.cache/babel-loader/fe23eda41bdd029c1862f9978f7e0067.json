{"ast":null,"code":"var _jsxFileName = \"/app/src/components/Compose.jsx\";\nimport { Input } from '@mui/material';\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Compose extends Component {\n  postMessage(e) {\n    if (sessionStorage.getItem('messageToken') === null || e.keyCode !== 13) return;\n    e.preventDefault();\n    if (e.target.value === \"\") return;\n    var form = new FormData();\n    form.append(\"message\", e.target.value);\n    var request = new XMLHttpRequest();\n    request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n    request.setRequestHeader(\"Authorization\", \"Bearer \" + messageToken);\n\n    request.onreadystatechange = function (event) {\n      if (event.target.readyState == 4 && event.target.status != 403 && messageToken != null) {\n        messageToken = event.target.getResponseHeader(\"token\");\n      }\n    };\n\n    request.send(form);\n    message.value = \"\";\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Input, {\n      onKeyUp: e => this.postMessage(e),\n      placeholder: this.props.needToLogin ? 'You need to log in before writting messages.' : 'Type a message here'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nexport default Compose;","map":{"version":3,"sources":["/app/src/components/Compose.jsx"],"names":["Input","React","Component","Compose","postMessage","e","sessionStorage","getItem","keyCode","preventDefault","target","value","form","FormData","append","request","XMLHttpRequest","open","setRequestHeader","messageToken","onreadystatechange","event","readyState","status","getResponseHeader","send","message","render","props","needToLogin"],"mappings":";AAAA,SAASA,KAAT,QAAsB,eAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,OAAO,MAAMC,OAAN,SAAsBD,SAAtB,CAAgC;AAEnCE,EAAAA,WAAW,CAACC,CAAD,EAAG;AACV,QAAIC,cAAc,CAACC,OAAf,CAAuB,cAAvB,MAA2C,IAA3C,IAAmDF,CAAC,CAACG,OAAF,KAAc,EAArE,EACI;AACJH,IAAAA,CAAC,CAACI,cAAF;AACA,QAAIJ,CAAC,CAACK,MAAF,CAASC,KAAT,KAAmB,EAAvB,EAA2B;AAE3B,QAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,IAAAA,IAAI,CAACE,MAAL,CAAY,SAAZ,EAAuBT,CAAC,CAACK,MAAF,CAASC,KAAhC;AAEA,QAAII,OAAO,GAAG,IAAIC,cAAJ,EAAd;AACAD,IAAAA,OAAO,CAACE,IAAR,CAAa,MAAb,EAAqBX,cAAc,CAACC,OAAf,CAAuB,KAAvB,IAAgC,UAArD;AACAQ,IAAAA,OAAO,CAACG,gBAAR,CACI,eADJ,EAEI,YAAYC,YAFhB;;AAIAJ,IAAAA,OAAO,CAACK,kBAAR,GAA6B,UAASC,KAAT,EAAgB;AACzC,UAAIA,KAAK,CAACX,MAAN,CAAaY,UAAb,IAA2B,CAA3B,IAAgCD,KAAK,CAACX,MAAN,CAAaa,MAAb,IAAuB,GAAvD,IAA8DJ,YAAY,IAAI,IAAlF,EAAwF;AACpFA,QAAAA,YAAY,GAAGE,KAAK,CAACX,MAAN,CAAac,iBAAb,CAA+B,OAA/B,CAAf;AACH;AACJ,KAJD;;AAKAT,IAAAA,OAAO,CAACU,IAAR,CAAab,IAAb;AAEAc,IAAAA,OAAO,CAACf,KAAR,GAAgB,EAAhB;AACC;;AAELgB,EAAAA,MAAM,GAAG;AACL,wBACI,QAAC,KAAD;AAAO,MAAA,OAAO,EAAGtB,CAAD,IAAO,KAAKD,WAAL,CAAiBC,CAAjB,CAAvB;AAA4C,MAAA,WAAW,EAAE,KAAKuB,KAAL,CAAWC,WAAX,GAAwB,8CAAxB,GAAyE;AAAlI;AAAA;AAAA;AAAA;AAAA,YADJ;AAGH;;AA/BkC;AAkCvC,eAAe1B,OAAf","sourcesContent":["import { Input } from '@mui/material'\nimport React, { Component } from 'react'\n\nexport class Compose extends Component {\n\n    postMessage(e){\n        if (sessionStorage.getItem('messageToken') === null || e.keyCode !== 13)\n            return;\n        e.preventDefault();\n        if (e.target.value === \"\") return;\n    \n        var form = new FormData();\n        form.append(\"message\", e.target.value);\n    \n        var request = new XMLHttpRequest();\n        request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n        request.setRequestHeader(\n            \"Authorization\",\n            \"Bearer \" + messageToken\n        );\n        request.onreadystatechange = function(event) {\n            if (event.target.readyState == 4 && event.target.status != 403 && messageToken != null) {\n                messageToken = event.target.getResponseHeader(\"token\");\n            }\n        }\n        request.send(form);\n    \n        message.value = \"\";\n        }\n\n    render() {\n        return (\n            <Input onKeyUp={(e) => this.postMessage(e)} placeholder={this.props.needToLogin? 'You need to log in before writting messages.' : 'Type a message here'} />\n        )\n    }\n}\n\nexport default Compose\n"]},"metadata":{},"sourceType":"module"}