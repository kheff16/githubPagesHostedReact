{"ast":null,"code":"var _jsxFileName = \"/app/src/components/Compose.jsx\";\nimport { Input } from '@mui/material';\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Compose extends Component {\n  postMessage(e) {\n    debugger;\n    var messageToken = sessionStorage.getItem('messageToken');\n    if (messageToken === null || e.keyCode !== 13) return;\n    e.preventDefault();\n    if (e.target.value === \"\") return;\n    var form = new FormData();\n    form.append(\"message\", e.target.value);\n    var request = new XMLHttpRequest(); // request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n\n    request.open(\"POST\", process.env.REACT_APP_BASE_URL + \"/message\");\n    request.setRequestHeader(\"Authorization\", \"Bearer \" + messageToken);\n\n    request.onreadystatechange = function (event) {\n      if (event.target.readyState == 4 && event.target.status != 403 && messageToken != null) {\n        messageToken = event.target.getResponseHeader(\"token\");\n      }\n    };\n\n    request.send(form);\n    e.target.value = \"\";\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Input, {\n      onKeyUp: e => this.postMessage(e),\n      placeholder: this.props.needToLogin ? 'You need to log in before writting messages.' : 'Type a message here'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nexport default Compose;","map":{"version":3,"sources":["/app/src/components/Compose.jsx"],"names":["Input","React","Component","Compose","postMessage","e","messageToken","sessionStorage","getItem","keyCode","preventDefault","target","value","form","FormData","append","request","XMLHttpRequest","open","process","env","REACT_APP_BASE_URL","setRequestHeader","onreadystatechange","event","readyState","status","getResponseHeader","send","render","props","needToLogin"],"mappings":";AAAA,SAASA,KAAT,QAAsB,eAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,OAAO,MAAMC,OAAN,SAAsBD,SAAtB,CAAgC;AAEnCE,EAAAA,WAAW,CAACC,CAAD,EAAG;AACV;AACA,QAAIC,YAAY,GAACC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAjB;AAEA,QAAIF,YAAY,KAAK,IAAjB,IAAyBD,CAAC,CAACI,OAAF,KAAc,EAA3C,EACI;AACJJ,IAAAA,CAAC,CAACK,cAAF;AACA,QAAIL,CAAC,CAACM,MAAF,CAASC,KAAT,KAAmB,EAAvB,EAA2B;AAE3B,QAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,IAAAA,IAAI,CAACE,MAAL,CAAY,SAAZ,EAAuBV,CAAC,CAACM,MAAF,CAASC,KAAhC;AAEA,QAAII,OAAO,GAAG,IAAIC,cAAJ,EAAd,CAZU,CAaV;;AACAD,IAAAA,OAAO,CAACE,IAAR,CAAa,MAAb,EAAqBC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,UAAtD;AACAL,IAAAA,OAAO,CAACM,gBAAR,CACI,eADJ,EAEI,YAAYhB,YAFhB;;AAIAU,IAAAA,OAAO,CAACO,kBAAR,GAA6B,UAASC,KAAT,EAAgB;AACzC,UAAIA,KAAK,CAACb,MAAN,CAAac,UAAb,IAA2B,CAA3B,IAAgCD,KAAK,CAACb,MAAN,CAAae,MAAb,IAAuB,GAAvD,IAA8DpB,YAAY,IAAI,IAAlF,EAAwF;AACpFA,QAAAA,YAAY,GAAGkB,KAAK,CAACb,MAAN,CAAagB,iBAAb,CAA+B,OAA/B,CAAf;AACH;AACJ,KAJD;;AAKAX,IAAAA,OAAO,CAACY,IAAR,CAAaf,IAAb;AAEAR,IAAAA,CAAC,CAACM,MAAF,CAASC,KAAT,GAAiB,EAAjB;AACC;;AAELiB,EAAAA,MAAM,GAAG;AACL,wBACI,QAAC,KAAD;AAAO,MAAA,OAAO,EAAGxB,CAAD,IAAO,KAAKD,WAAL,CAAiBC,CAAjB,CAAvB;AAA4C,MAAA,WAAW,EAAE,KAAKyB,KAAL,CAAWC,WAAX,GAAwB,8CAAxB,GAAyE;AAAlI;AAAA;AAAA;AAAA;AAAA,YADJ;AAGH;;AAnCkC;AAsCvC,eAAe5B,OAAf","sourcesContent":["import { Input } from '@mui/material'\nimport React, { Component } from 'react'\n\nexport class Compose extends Component {\n\n    postMessage(e){\n        debugger\n        var messageToken=sessionStorage.getItem('messageToken')\n\n        if (messageToken === null || e.keyCode !== 13)\n            return;\n        e.preventDefault();\n        if (e.target.value === \"\") return;\n    \n        var form = new FormData();\n        form.append(\"message\", e.target.value);\n    \n        var request = new XMLHttpRequest();\n        // request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n        request.open(\"POST\", process.env.REACT_APP_BASE_URL + \"/message\");\n        request.setRequestHeader(\n            \"Authorization\",\n            \"Bearer \" + messageToken\n        );\n        request.onreadystatechange = function(event) {\n            if (event.target.readyState == 4 && event.target.status != 403 && messageToken != null) {\n                messageToken = event.target.getResponseHeader(\"token\");\n            }\n        }\n        request.send(form);\n    \n        e.target.value = \"\";\n        }\n\n    render() {\n        return (\n            <Input onKeyUp={(e) => this.postMessage(e)} placeholder={this.props.needToLogin? 'You need to log in before writting messages.' : 'Type a message here'} />\n        )\n    }\n}\n\nexport default Compose\n"]},"metadata":{},"sourceType":"module"}