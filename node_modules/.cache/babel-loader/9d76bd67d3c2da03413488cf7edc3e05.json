{"ast":null,"code":"var _jsxFileName = \"/Users/Server/student/cs291a/cs291a_proj3/client/src/App.jsx\";\nimport { Component } from \"react\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction login() {\n  var request = new XMLHttpRequest();\n  var form = new FormData();\n  form.append(\"password\", password.value);\n  form.append(\"username\", username.value);\n  sessionStorage.setItem(\"url\", url.value);\n  request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/login\");\n\n  request.onreadystatechange = function () {\n    if (this.readyState != 4) return;\n\n    if (this.status === 201) {\n      login_modal.style.display = \"none\";\n      password.value = \"\";\n      username.value = \"\";\n      const data = JSON.parse(this.responseText);\n      messageToken = data.message_token;\n      streamToken = data.stream_token;\n      start_stream();\n    } else if (this.status === 403) {\n      alert(\"Invalid username or password\");\n    } else if (this.status === 409) {\n      alert(username.value + \" is already logged in\");\n    } else {\n      alert(this.status + \" failure to /login\");\n    }\n  };\n\n  request.send(form);\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    const server = new EventSource(\"http://localhost:3001/stream/a\");\n    server.addEventListener(\"message\", event => {\n      if (event.data === \"Goodbye!\") {\n        console.log(\"Closing SSE connection\");\n        server.close();\n      } else {\n        console.log(event.data);\n      }\n    });\n\n    server.onerror = _event => {\n      console.log(\"Connection lost, reestablishing\");\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"App-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [a(), \"Edit \", /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"src/App.jsx\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 18\n          }, this), \" and save to reload.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"App-link\",\n          href: \"https://reactjs.org\",\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: \"Learn React\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/Server/student/cs291a/cs291a_proj3/client/src/App.jsx"],"names":["Component","login","request","XMLHttpRequest","form","FormData","append","password","value","username","sessionStorage","setItem","url","open","getItem","onreadystatechange","readyState","status","login_modal","style","display","data","JSON","parse","responseText","messageToken","message_token","streamToken","stream_token","start_stream","alert","send","App","constructor","props","server","EventSource","addEventListener","event","console","log","close","onerror","_event","render","a"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport \"./App.css\";\n\nfunction login() {\n  var request = new XMLHttpRequest();\n  var form = new FormData();\n  form.append(\"password\", password.value);\n  form.append(\"username\", username.value);\n  sessionStorage.setItem(\"url\", url.value);\n  request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/login\");\n  request.onreadystatechange = function() {\n      if (this.readyState != 4) return;\n      if (this.status === 201) {\n          login_modal.style.display = \"none\";\n          password.value = \"\";\n          username.value = \"\";\n          const data = JSON.parse(this.responseText);\n          messageToken = data.message_token;\n          streamToken = data.stream_token;\n          start_stream();\n      } else if (this.status === 403) {\n          alert(\"Invalid username or password\");\n      } else if (this.status === 409) {\n          alert(username.value + \" is already logged in\");\n\n      } else {\n          alert(this.status + \" failure to /login\");\n      }\n  };\n  request.send(form);\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    const server = new EventSource(\"http://localhost:3001/stream/a\");\n    server.addEventListener(\"message\", (event) => {\n      if (event.data === \"Goodbye!\") {\n        console.log(\"Closing SSE connection\");\n        server.close();\n      } else {\n        console.log(event.data);\n      }\n    });\n    server.onerror = (_event) => {\n      console.log(\"Connection lost, reestablishing\");\n    };\n  }\n\n  \n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <p>\n            {a()}\n            Edit <code>src/App.jsx</code> and save to reload.\n          </p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n        </header>\n      </div>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}