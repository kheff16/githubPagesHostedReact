{"version":3,"sources":["components/Compose.jsx","components/LoginForm.jsx","components/MessageList.jsx","components/UserList.jsx","App.jsx","reportWebVitals.js","index.js"],"names":["Compose","e","messageToken","sessionStorage","getItem","keyCode","preventDefault","target","value","form","FormData","append","request","XMLHttpRequest","open","this","props","url","setRequestHeader","onreadystatechange","event","readyState","status","getResponseHeader","setItem","send","Input","onKeyUp","postMessage","placeholder","needToLogin","Component","LoginDialog","Dialog","Box","p","FormGroup","pb","FormLabel","style","paddingRight","key","login","onChange","setURL","setUsername","username","id","type","setPassword","password","MessageList","scrollToBottom","messagesEnd","scrollIntoView","behavior","messages","events","map","message","text","dateAndTime","Date","created","toLocaleDateString","toLocaleTimeString","user","ListItem","disablePadding","ListItemText","primary","toString","Paper","paddingLeft","height","overflow","List","float","clear","ref","el","UserList","userList","length","subheader","ListSubheader","component","displayUserList","App","state","streamToken","header","composePlaceholder","serve","bind","that","data","JSON","parse","responseText","message_token","setState","stream_token","alert","server","EventSource","addEventListener","temp","splice","indexOf","prevState","santizedData","includes","close","disconnect","parsedEvent","users","console","log","onerror","_event","AppBar","textAlign","LoginForm","Grid","mt","container","spacing","item","xs","md","display","flexWrap","flexDirection","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a971039d.chunk.js","sourcesContent":["import { Input } from '@mui/material'\nimport React, { Component } from 'react'\n\nexport class Compose extends Component {\n\n    postMessage(e){\n        var messageToken=sessionStorage.getItem('messageToken')\n\n        if (messageToken === null || e.keyCode !== 13)\n            return;\n        e.preventDefault();\n        if (e.target.value === \"\") return;\n    \n        var form = new FormData();\n        form.append(\"message\", e.target.value);\n    \n        var request = new XMLHttpRequest();\n        // request.open(\"POST\", sessionStorage.getItem(\"url\") + \"/message\");\n        request.open(\"POST\", this.props.url + \"/message\");\n        request.setRequestHeader(\n            \"Authorization\",\n            \"Bearer \" + messageToken\n        );\n        request.onreadystatechange = function(event) {\n            if (event.target.readyState === 4 && event.target.status !== 403 && messageToken !== null) {\n                messageToken = event.target.getResponseHeader(\"token\");\n                sessionStorage.setItem('messageToken', messageToken)\n            }\n        }\n        request.send(form);\n    \n        e.target.value = \"\";\n    }\n\n    render() {\n        return (\n            <Input onKeyUp={(e) => this.postMessage(e)} placeholder={this.props.needToLogin? 'You need to log in before writting messages.' : 'Type a message here'} />\n        )\n    }\n}\n\nexport default Compose\n","import React, { Component } from 'react';\nimport { Box, Dialog, FormGroup, FormLabel, Input } from '@mui/material';\n\nclass LoginDialog extends Component {\n    \n    render(){\n\n      return(\n          <Dialog open={this.props.needToLogin}>\n          <Box p={5}>\n            <FormGroup>\n              <Box pb={2}>\n              <FormLabel style={{paddingRight: '47px'}}>\n                  {\"URL:\"}\n                </FormLabel>\n                <Input onKeyUp={(e) => {if(e.key === 'Enter') this.props.login()}} onChange={(e) => this.props.setURL(e.target.value)} value={this.props.url}/>\n              </Box>\n              <Box pb={2}>\n                <FormLabel>\n                  {\"Username: \"}\n                </FormLabel>\n                <Input onKeyUp={(e) => {if(e.key === 'Enter') this.props.login()}} onChange={(e) => this.props.setUsername(e.target.value)} value={this.props.username}/>\n              </Box>\n              <Box id=\"loginForm\">\n                <FormLabel id=\"loginForm\">\n                    {\"Password: \"}\n                  </FormLabel>\n                <Input id=\"loginForm\" type=\"password\" onKeyUp={(e) => {if(e.key === 'Enter') this.props.login()}} onChange={(e) => this.props.setPassword(e.target.value)} value={this.props.password} />\n              </Box>\n            </FormGroup>\n          </Box>\n        </Dialog>\n      )\n    }\n}\n\nexport default LoginDialog","import React, { Component } from 'react'\nimport { Paper, List, ListItem, ListItemText } from '@mui/material'\n\n\nexport class MessageList extends Component {\n\n    // https://stackoverflow.com/questions/37620694/how-to-scroll-to-bottom-in-react\n\n    componentDidUpdate(){\n        this.scrollToBottom();\n    }\n\n    scrollToBottom = () => {\n        this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n      }\n\n    render() {\n        const messages = this.props.events? this.props.events.map( (message) => {\n            var text\n            var dateAndTime = new Date(message.created * 1000).toLocaleDateString(\"en-US\") + ' ' + new Date(message.created * 1000).toLocaleTimeString(\"en-US\")\n            switch(message.type){\n                case 'Message':\n                    text = message.user? `${message.user} says: ${message.message} at ${dateAndTime}` : `${message.message} at ${dateAndTime}`\n                    break;\n                case 'Join':\n                    text = `JOIN ${message.user} at ${dateAndTime}`\n                    break;\n                case 'Part':\n                    text = `PART ${message.user} at ${dateAndTime}`\n                    break;\n                case 'Status':\n                    text= `STATUS ${message.message} at ${dateAndTime}`\n                    break;\n                default:\n                    return \"\"\n            }\n            return( <ListItem key={message.created.toString()} disablePadding>\n                <ListItemText primary={text} />\n            </ListItem>)\n        }) : 'no messages'\n        return (\n            <Paper style={{ paddingLeft: '8px', height: '85vh', overflow: 'auto'}}>\n                <List style={{ overflow: 'auto'}}>\n                {messages}\n                <div style={{ float:\"left\", clear: \"both\" }} ref={(el) => { this.messagesEnd = el; }}></div>\n                </List>\n            </Paper>\n        )\n    }\n}\n\nexport default MessageList\n","import React, { Component } from 'react'\n\nimport {List, ListItem, ListItemText, ListSubheader} from '@mui/material'\n\nclass UserList extends Component{\n\n    displayUserList(){\n        if (!this.props.userList){\n            return \"no users\"\n        }\n        return this.props.userList.length > 0? this.props.userList.map( (user) => {\n            return(\n            <ListItem key={user} disablePadding>\n                <ListItemText primary={user} />\n            </ListItem>)\n        }) : \"no users\"\n    }\n\n    render(){\n        return(\n        <List style={{paddingLeft: '8px'}} subheader={\n            <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n              User List\n            </ListSubheader>\n          }>\n            {this.displayUserList()}\n        </List>\n        )\n    }\n}\n\nexport default UserList","import { Component } from \"react\";\nimport \"./App.css\";\nimport Compose from \"./components/Compose\";\nimport LoginForm from \"./components/LoginForm\";\nimport MessageList from \"./components/MessageList\";\nimport UserList from \"./components/UserList\"\nimport { Grid, Paper, AppBar } from '@mui/material'\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      userList: [],\n      events: [],\n      username:\"\",\n      password:\"\",\n      url: \"http://localhost:3000\",\n      needToLogin: true,\n      streamToken: \"\",\n      header: 'Chat',\n      composePlaceholder: 'Enter a message to send'\n    }\n    this.serve = this.serve.bind(this)\n    this.login = this.login.bind(this)\n    this.setUsername = this.setUsername.bind(this)\n    this.setPassword = this.setPassword.bind(this)\n  }\n\n\n    login() {\n      var request = new XMLHttpRequest();\n      var form = new FormData();\n      form.append(\"password\", this.state.password);\n      form.append(\"username\", this.state.username);\n      request.open(\"POST\", this.state.url + \"/login\");\n      var that = this;\n      request.onreadystatechange = function() {\n          if (this.readyState !== 4) return;\n          if (this.status === 201) {\n              const data = JSON.parse(this.responseText);\n              sessionStorage.setItem('messageToken', data.message_token)\n              that.setState({\n                password: \"\",\n                username: \"Loading...\", \n                streamToken: data.stream_token,\n                needToLogin: false\n              })\n              that.serve();\n          } else if (this.status === 403) {\n              alert(\"Invalid username or password\");\n          } else if (this.status === 409) {\n              alert(that.state.username + \" is already logged in\");\n          } else {\n              alert(this.status + \" failure to /login\");\n          }\n      }\n      request.send(form);\n    }\n\n    serve(){\n      const server = new EventSource(`${this.state.url}/stream/${this.state.streamToken}`);\n      server.addEventListener(\"Part\", (event) =>{\n        event = {...JSON.parse(event.data), type: 'Part'}\n        var temp = this.state.userList\n        temp.splice(this.state.userList.indexOf(event.user), 1)\n        this.setState(prevState => ({userList: temp, \n          events: [...prevState.events, event], needToLogin:false})\n      )}, false)\n      server.addEventListener(\"open\", (event) =>{\n        this.setState(prevState => ({username: \"\", needToLogin: false}))\n      }, false)\n      server.addEventListener(\"Message\", (event) => {\n        var data = {...JSON.parse(event.data), type: 'Message'}\n        this.setState(prevState => ({events: [...prevState.events, data], needToLogin:false}))\n      }, false);\n      server.addEventListener(\"Join\", (event) => {\n        var data = JSON.parse(event.data);\n        var santizedData = {...data, type: 'Join'}\n        this.setState(prevState => ({header: 'Chat', needToLogin: false, events: [...prevState.events, santizedData]}))\n        if(this.state.userList.includes(data.user)) { this.setState(prevState => ({header: 'Chat'})); return}\n        this.setState(prevState => ({userList: [...prevState.userList, data.user]}))\n      }, false);\n      server.addEventListener(\n        \"Disconnect\",\n        () => {\n            server.close();\n            this.disconnect()\n            this.setState({events: []})\n        },\n        false\n    );\n      server.addEventListener(\"ServerStatus\", (event) => {\n        var parsedEvent = JSON.parse(event.data)\n        var santizedData = {message: parsedEvent.status, created: parsedEvent.created, type: 'Status'}\n        this.setState(prevState => ({events: [...this.state.events, santizedData]}))\n      }, false);\n      server.addEventListener(\"Users\", (event => {\n        this.setState(prevState => ({ userList: JSON.parse(event.data).users}))\n      }), false);\n      server.addEventListener(\n        \"error\",\n        (event) => {\n            if (event.target.readyState === 2) {\n                this.disconnect();\n            } else {\n                this.setState(prevState => ({header: \"Disconnected, retrying\"}))\n                console.log(\"Disconnected, retrying\");\n            }\n        },\n        false\n    );\n      server.onerror = (_event) => {\n        console.log(\"Connection lost, reestablishing\");\n      };\n    }\n\n    setUsername(value){\n      this.setState({username: value})\n    }\n\n    setPassword(value){\n      this.setState({password: value})\n    }\n    setURL(value){\n      this.setState({url: value})\n    }\n\n    disconnect(){\n      this.setState(prevState => ({needToLogin: true, messageToken: \"\", streamToken: \"\", userList: []}))\n    }\n\n\n  render() {\n    // debugger\n\n    return this.state.needToLogin? ( \n      <>\n        <header>\n          <AppBar style={{textAlign: 'center'}}>{'Log In to View Chat'}</AppBar>\n        </header>\n        <p>Not logged in</p>\n        <LoginForm url={this.state.url} setURL={this.setURL} setUsername={this.setUsername} setPassword={this.setPassword} needToLogin={this.state.needToLogin} serve={this.serve} login={this.login} username={this.state.username} password={this.state.password}/>\n      </>\n      ) : (\n      <>\n        <header>\n          <AppBar style={{textAlign: 'center'}}>{this.state.header}</AppBar>\n        </header>\n        <LoginForm setUsername={this.setUsername} setPassword={this.setPassword} needToLogin={this.state.needToLogin} serve={this.serve} login={this.login} username={this.state.username} password={this.state.password}/>\n        <Grid mt={2} container spacing={2}>\n          <Grid item xs={8} md={8}>\n            <Paper style={{display: 'flex', flexWrap: 'wrap', flexDirection: 'column'}}>\n              <MessageList events={this.state.events}/>\n              <Compose url={this.state.url} needToLogin={this.state.needToLogin}/>\n            </Paper>\n          </Grid>\n          <Grid item xs={4} md={4}>\n            <Paper >\n              <UserList userList={this.state.userList} />\n            </Paper>\n          </Grid>\n        </Grid>\n      </>\n    );\n  }\n}\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\n// Import Roboto (which is a font)\n\nimport '@fontsource/roboto/300.css';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}